<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>单键打字练习</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: 100vh;
                margin: 0;
                background-color: #f5f5f5;
            }
            .container {
                text-align: center;
                background-color: white;
                padding: 30px;
                border-radius: 10px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }
            .character {
                font-size: 72px;
                margin: 20px 0;
                height: 100px;
            }
            .message {
                height: 24px;
                margin: 10px 0;
                color: #ff4444;
            }
            .stats {
                margin-top: 20px;
                font-size: 14px;
                color: #666;
            }
            .instructions {
                margin-top: 30px;
                font-size: 14px;
                color: #666;
            }
            .image-container {
            width: 100%;
            max-width: 700px;
            background: white;
            padding: 20px;
            margin-top: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
        
        .image-container h2 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .keyboard-image {
            width: 100%;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .keyboard-image img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.3s ease;
        }
        
        .keyboard-image img:hover {
            transform: scale(1.02);
        }
        
        .image-note {
            margin-top: 15px;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        @media (max-width: 600px) {
            .container, .image-container {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .character {
                font-size: 60px;
                height: 90px;
            }
            
            .stats {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
        }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>单键打字练习</h1>
            <div class="character" id="character">?</div>
            <div class="message" id="message"></div>
            <div class="stats">
                正确: <span id="correct">0</span> | 错误:
                <span id="wrong">0</span>
            </div>
            <div class="instructions">按下键盘上对应的按键来匹配显示的字符</div>
            <div class="image-container">
                <h2>键盘指法参考</h2>
                    <div class="keyboard-image">
                        <!-- 使用实际图片URL替换此处 -->
                        <img src="https://lbzj.github.io/img/keyboard1.png" alt="键盘指法示意图">
                    </div>
                    <p class="image-note">图片可滚动缩放，鼠标悬停有放大效果</p>
            </div>
        </div>

        <script>
            // 配置字表和对应的按键
            const characterMap = [
                { char: "丨丨", key: "A" },
                { char: "㇇丿", key: "B" },
                { char: "㇇㇇", key: "C" },
                { char: "丨㇇", key: "D" },
                { char: "丿㇇", key: "E" },
                { char: "丨一", key: "F" },
                { char: "丨丿", key: "G" },
                { char: "一丿", key: "H" },
                { char: "丶㇇", key: "I" },
                { char: "一一", key: "J" },
                { char: "一㇇", key: "K" },
                { char: "一丶", key: "L" },
                { char: "一丨", key: "M" },
                { char: "㇇丨", key: "N" },
                { char: "丶丶", key: "O" },
                { char: "丶丨", key: "P" },
                { char: "丿丨", key: "Q" },
                { char: "丿一", key: "R" },
                { char: "丨丶", key: "S" },
                { char: "丿丿", key: "T" },
                { char: "丶一", key: "U" },
                { char: "㇇一", key: "V" },
                { char: "丿丶", key: "W" },
                { char: "㇇丶", key: "X" },
                { char: "丶丿", key: "Y" },
            ];

            // 状态变量
            let currentChar = null;
            let correctCount = 0;
            let wrongCount = 0;
            let lastKeyTime = 0; // 记录上次按键时间
            const DEBOUNCE_DELAY = 200; // 防抖延迟时间(毫秒)

            // DOM 元素
            const characterElement = document.getElementById("character");
            const messageElement = document.getElementById("message");
            const correctElement = document.getElementById("correct");
            const wrongElement = document.getElementById("wrong");

            // 随机选择一个字符
            function getRandomChar() {
                const randomIndex = Math.floor(
                    Math.random() * characterMap.length,
                );
                return characterMap[randomIndex];
            }

            // 显示新字符
            function showNewChar() {
                currentChar = getRandomChar();
                characterElement.textContent = currentChar.char;
                messageElement.textContent = "";
            }

            // 初始化
            function init() {
                showNewChar();

                // 监听键盘事件
                document.addEventListener("keydown", (event) => {
                    // 忽略特殊键
                    if (event.ctrlKey || event.altKey || event.metaKey) {
                        return;
                    }

                    // 防抖处理：如果两次按键间隔太短，忽略后续按键
                    const currentTime = new Date().getTime();
                    if (currentTime - lastKeyTime < DEBOUNCE_DELAY) {
                        return;
                    }
                    lastKeyTime = currentTime;

                    const pressedKey = event.key.toUpperCase();

                    if (pressedKey === currentChar.key) {
                        // 正确按键
                        correctCount++;
                        correctElement.textContent = correctCount;
                        showNewChar();
                    } else {
                        // 错误按键
                        wrongCount++;
                        wrongElement.textContent = wrongCount;
                        messageElement.textContent =
                            "错误! 正确为" + currentChar.key;
                    }
                });
            }

            // 启动应用
            init();
        </script>
    </body>
</html>
